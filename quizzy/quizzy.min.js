/*! quizzy - v0.0.5 - 2013-07-15
* Copyright (c) 2013 ; Licensed  */
var quizzyUtils={};quizzyUtils.getRandom=function(a,b){return a+Math.floor(Math.random()*(b-a+1))},quizzyUtils.shuffleArray=function(a){for(var b,c,d=a.length-1;d>=0;d--)c=this.getRandom(0,d),b=a[d],a[d]=a[c],a[c]=b};var quizzyUtils={};quizzyUtils.getRandom=function(a,b){return a+Math.floor(Math.random()*(b-a+1))},quizzyUtils.shuffleArray=function(a){for(var b,c,d=a.length-1;d>=0;d--)c=this.getRandom(0,d),b=a[d],a[d]=a[c],a[c]=b};var quizzy=function(){function a(a,b,c){if(b.addEventListener)b.addEventListener(a,c,!1);else{if(!b.attachEvent)throw new Error("The supplied object does not support either event methods.");b.attachEvent("on"+a,c)}}function b(a){var b={};for(var d in l)b[d]=l[d];for(var d in a)b[d]=a[d];c.settings=b}var c={},d={};d.STRING_RADIO="radio",d.NUMBER_DEFAULT_SCORE_PER_QUESTION=1;var e,f,g,h,i,j,k,l={allowBackTrack:!1,showHistory:!1,backDistance:0};return c.currentQuestion,c.questions,c.settings,QuizzyQuestion=function(a){this.question=a.question,this.answer=a.choices[a.answer]||null,this.choices=a.choices,this.score=a.score||c.NUMBER_DEFAULT_SCORE_PER_QUESTION,this.type=a.type||d.STRING_RADIO,this.userChoice=null},c.init=function(a){if(a?b(a):c.settings=l,c.setUpQuestions(),g=document.getElementById("quizzy"),null==g)throw new Error("Couldn't find quizzy starting element. Aborting mission!");f=0,c.questionCount=e.size(),c.createQuizInterface(),c.start()},c.setUpQuestions=function(){var a=questions.slice();e=[];for(var b=0;b<a.length;b++)e.push(new QuizzyQuestion(a[b]));a=null,c.questions=e.slice(),quizzyUtils.shuffleArray(e),e=new LinkedList,e.arrayToList(c.questions.slice())},c.start=function(){c.currentQuestion=e.getFirst(),c.updateQuizInterface()},c.updateQuizInterface=function(){var a,b;i.innerHTML=c.currentQuestion.value.question;for(var d,e=document.createDocumentFragment(),f=j.firstChild;f;)d=null,("LABEL"==f.tagName||"INPUT"==f.tagName)&&(d=f),f=f.nextSibling,d&&d.parentNode.removeChild(d);for(a=c.createInput("radio",c.currentQuestion.value.choices),b=0;b<a.length;b++)e.appendChild(c.wrapInLabel(a[b]));j.appendChild(e),e=a=null},c.wrapInLabel=function(a,b){var c=document.createElement("label");return c.appendChild(a),c.innerHTML+=b||a.value,c},c.createInput=function(a,b){a=a||"radio",a=a.toLowerCase();var d=[];if(isNaN(b))if(b)for(var e=0;e<b.length;e++)"radio"==a&&d.push(c.createRadioButton("quizzy-radio",b[e]));else d.push(c.createRadioButton("quizzy-radio"));else for(var e=0;b>e;e++)"radio"==a&&d.push(c.createRadioButton("quizzy-radio"));return d},c.createRadioButton=function(a,b,c,d){var e=document.createElement("input");if(e.type="radio",e.name=a||"",e.value=b||"",e.id=c||"",d instanceof Array){for(var f=" ",g=0;g<d.length;g++)f+=d[g]+" ";d=f}return e.className=f,e},c.createQuizInterface=function(){for(h=document.createDocumentFragment(),i=document.createElement("h2"),i.id="quizzy-title",j=document.createElement("div"),j.id="quizzy-input-wrap",k={},k.next=c.createButton("NEXT","quizzy-next"),k.prev=c.createButton("BACK","quizzy-prev"),a("click",k.next,c.checkAnswer),a("click",k.prev,c.prevQuestion),h.appendChild(i),h.appendChild(j),h.appendChild(k.next),g.appendChild(h);h.lastChild;)h.removeChild(h.lastChild)},c.createButton=function(a,b,c){var d=document.createElement("button");if(d.id=b||"",d.innerHTML=a||"",c instanceof Array){for(var e=" ",f=0;f<c.length;f++)e+=c[f]+" ";c=e}return d.className=c||"",d},c.getNextQuestion=function(){return c.currentQuestion.next},c.jumpToQuestion=function(){},c.prevQuestion=function(){},c.nextQuestion=function(){c.currentQuestion=c.getNextQuestion(),c.currentQuestion?c.updateQuizInterface():c.end()},c.prevQuestion=function(){c.currentQuestion=c.currentQuestion.prev,c.updateQuizInterface()},c.checkAnswer=function(){for(var a,b=j.getElementsByTagName("input"),d=0;d<b.length;d++)b[d].checked&&(a=b[d].value);a?(a==c.currentQuestion.value.answer&&(f+=c.currentQuestion.value.score),c.nextQuestion()):alert("You didn't input anything!")},c.calculateScore=function(){return f},c.getRawScore=function(){return f},c.end=function(){i.remove();for(var a=j.firstChild;a;)removeNode=a,a=a.nextSibling,removeNode&&removeNode.parentNode.removeChild(removeNode);var b=document.createElement("h2");b.innerHTML="Your final score is: "+c.calculateScore(),g.insertBefore(b,g.firstChild)},c}(),LinkedList=function(){var a,b,c={},d=0;c.push=function(c){var f=new e(c);return 0===d?a=b=f:(b.next=f,f.prev=b,b=f),d++,f},c.pop=function(){var a=b;return b=b.prev,d--,a},c.shift=function(){var b=a;return a=a.next,d--,b},c.remove=function(b){var c,e=a;if(0===b)return d--,this.shift();if(b===d)return this.pop();for(;b--;)e=e.next;return c=e,e.prev.next=e.next,e.next.prev=e.prev,c},c.get=function(c){var d;if(0===c)return a;if(c===size-1)return b;for(d=first;c--;)d=d.next;return d},c.size=function(){return d},c.getFirst=function(){return a},c.getLast=function(){return b},c.arrayToList=function(a){for(var b=0;b<a.length;b++)c.push(a[b])};var e=function(a){this.value=a};return c},_hours=36e5,_minutes=6e4,_seconds=1e3;Timer=function(a,b,c){this.handler=b||null,this.tick=a||20,this.elapsed=0,this.last=0,this.clock=0,this.minutes=0,this.seconds=0,this.milliseconds=0,console.log(this.tick),c&&this.start()},Timer.prototype.start=function(){console.log(this.tick),this.last=Date.now();var a=this;this.intervalId=setInterval(function(){a.update()},this.tick)},Timer.prototype.stop=function(){clearInterval(this.intervalId)},Timer.prototype.update=function(){this.elapsed=Date.now()-this.last,this.clock+=this.elapsed,this.milliseconds+=elapsed,this.seconds+=Math.floor(this.milliseconds/_seconds),this.minutes+=Math.floor(this.seconds/60),this.hours=Math.floor(this.clock/_hours),this.seconds>60&&(this.seconds=0),this.minutes>60&&(this.this.last=Date.now())},Timer.prototype.getTime=function(){return{hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.clock}},Timer.prototype.printTime=function(){var a,b,c,d=this.getTime();a=d.hours,b=d.minutes<10?"0"+d.minutes:d.minutes,c=d.seconds<10?"0"+d.seconds:d.seconds,console.log(a+":"+b+":"+c)};